<!DOCTYPE html>
<html>
  <head>
    <link href="css/default.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="display"></div>
    <div class="content-list"></div>
  </body>
  <script src="./js/templates.js"></script>
  <script src="./js/buildNode.js"></script>
  <script src="./js/deepCopy.js"></script>
  <script>
    // 预览列表
    const contentList = document.querySelector('.content-list');
    const templatesCopy = deepCopy(templates);
    templatesCopy.forEach(temItem => {
      buildNode(
        temItem.children,
        contentList,
        {}
      )
    });
    for (child of contentList.children) {
      for (node of child.children) {
        node.style.transform = node.style.transform + 'scale(.2)';
      }
    }

    // 工作区
    const display = document.querySelector('.display');
    const switchTemplate = function(tem) {
      tem.forEach(temItem => {
        buildNode(
          temItem.children,
          display,
          {
            height: '100%',
          }
        )
      })
    }
    const templateWorkspace = templatesCopy.slice(0, 1);
    switchTemplate(templateWorkspace);

    // 预览列表事件
    contentList.addEventListener('click', event => {
      let id = event.target.id[1]
      console.log(id);
      display.removeChild(display.firstChild);
      switchTemplate(templatesCopy.slice(id, id+1));
    });
  </script>
</html>